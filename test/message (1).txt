<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contagem Regressiva - Folding Effect</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cormorant Garamond', Georgia, serif; }
    body { perspective: 700px; background: linear-gradient(135deg,#f5e6d3 0%,#e8d4b8 100%); min-height: 100vh; display:flex; align-items:center; justify-content:center; padding:20px; }

    .cardContainer {
      width: 400px;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 20px 60px rgba(0,0,0,0.15);
      position: relative;
      overflow: visible;
      transition: height 0.9s;
      height: 240px;
    }

    .firstDisplay {
      width:100%;
      height:240px;
      position:absolute;
      background:#ffffff;
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px 30px;
      z-index:10;
      box-shadow: 0px 0px 25px -1px rgba(0,0,0,0.17);
    }

    .wedding-header { text-align:center; width:100%; }
    .date-image-container { display:flex; justify-content:center; margin-bottom:20px; width:100% }
    .date-image { max-width:300px; width:100%; height:auto }

    .wedding-location { font-size:1rem; font-weight:400; color:#6a6a6a; letter-spacing:0.25em; margin:15px 0; }
    .tap-hint { font-size:0.85rem; color:#999; margin-top:25px; font-style:italic; animation:pulse 2s infinite; }
    @keyframes pulse { 0%,100%{opacity:0.5} 50%{opacity:1} }

    /* Folding panels */
    .first, .second, .third {
      position:absolute;
      width:100%;
      left:0;
      transform-origin:bottom;
      transform-style:preserve-3d;
      transition: transform 0.6s;
      border-radius:12px;
      pointer-events:none;
    }

    .first { height:240px; top:0; }
    .second { height:80px; bottom: -2px; top:auto; }
    .third { height:160px; bottom: -2px; top:auto; }

    .firstTop, .firstBehind, .secondTop, .secondBehind, .thirdTop, .thirdBehind {
      position:absolute; left:0; width:100%;
      backface-visibility:hidden; border-radius:12px;
    }
    .firstTop { height:240px; background:#f8f8f8; border:1px dashed #d1d1d1; border-left:none; border-right:none; }
    .firstBehind { height:240px; background:#fff; transform: rotateX(-180deg); padding:30px; display:flex; align-items:center; justify-content:center; box-shadow: 0px 11px 25px -1px rgba(0,0,0,0.17); border:1px dashed #d1d1d1; border-left:none; border-right:none; }

    .secondTop { height:80px; background:#f0f0f0; border:1px dashed #d1d1d1; border-left:none; border-right:none; }
    .secondBehind { height:80px; background:#fff; transform: rotateX(-180deg); display:flex; align-items:center; justify-content:center; padding:20px; box-shadow: 0px 11px 25px -1px rgba(0,0,0,0.17); border:1px dashed #d1d1d1; border-left:none; border-right:none; }

    .thirdTop { height:160px; background:#e8e8e8; border:1px dashed #d1d1d1; border-left:none; border-right:none; }
    .thirdBehind { height:160px; background:#fff; transform: rotateX(-180deg); padding:20px; display:flex; align-items:center; justify-content:center; box-shadow: 0px 11px 25px -1px rgba(0,0,0,0.17); border-radius: 0 0 12px 12px; }

    .countdown-title { font-size:1.5rem; color:#2c2c2c; letter-spacing:0.3em; text-align:center; }
    .countdown-subtitle { font-size:1.1rem; color:#6a6a6a; letter-spacing:0.15em; }

    /* Flip clock */
    .flipClock { display:flex; justify-content:center; gap:15px; flex-wrap:wrap; }
    .flipUnit { display:flex; flex-direction:column; align-items:center; gap:8px; }

    .flipUnitContainer {
      position:relative; width:60px; height:70px; perspective:300px; background:#fdfbf7;
    }

    .upperCard, .lowerCard {
      display:flex; 
      justify-content:center; 
      position:relative; 
      width:100%; 
      height:50%; 
      overflow:hidden; 
      border:1px solid #e8d4b8; 
      background:#fdfbf7;
    }
    .upperCard { 
      align-items:flex-end; 
      border-bottom:0.5px solid #e8d4b8; 
      border-top-left-radius:4px; 
      border-top-right-radius:4px;
      position: absolute;
      top: 0;
      left: 0;
    }
    .upperCard span { 
      line-height: 70px;
      font-size: 2.5em;
      position: absolute;
      top: -2px;
      left: 50%;
      transform: translateX(-50%);
    }
  
    .lowerCard { 
      align-items:flex-start; 
      border-top:0.5px solid #e8d4b8; 
      border-bottom-left-radius:4px; 
      border-bottom-right-radius:4px;
      position: absolute;
      bottom: 0;
      left: 0;
    }
    .lowerCard span { 
      line-height: 70px;
      font-size: 2.5em;
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
    }

    .upperCard span, .lowerCard span, .flipCard span { 
      font-weight:300; 
      color:#2c2c2c; 
      display:inline-block;
    }

    .flipCard {
      position:absolute; 
      left:0; 
      width:100%; 
      height:50%; 
      overflow:hidden; 
      backface-visibility:hidden; 
      display:flex; 
      justify-content:center;
      background:#fdfbf7; 
      border:0.5px solid #e8d4b8;
      z-index: 5;
    }

    .flipCard.unfold { 
      bottom: 0;
      align-items:flex-start; 
      transform-origin:50% 0%; 
      transform:rotateX(180deg); 
      border-top:0.5px solid #e8d4b8; 
      border-bottom-left-radius:4px; 
      border-bottom-right-radius:4px;
    }
    .flipCard.unfold span { 
      line-height: 70px;
      font-size: 2.5em;
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
    }
  
    .flipCard.fold { 
      top: 0;
      align-items:flex-end; 
      transform-origin:50% 100%; 
      transform:rotateX(0deg);
      border-bottom:0.5px solid #e8d4b8; 
      border-top-left-radius:4px; 
      border-top-right-radius:4px;
    }
    .flipCard.fold span { 
      line-height: 70px;
      font-size: 2.5em;
      position: absolute;
      top: -2px;
      left: 50%;
      transform: translateX(-50%);
    }

    .flipCard span {
      font-weight:300; 
      color:#2c2c2c; 
    }

    .flipCard.animating {
      z-index: 10;
    }

    .fold {
      animation: fold 0.6s cubic-bezier(0.455,0.03,0.515,0.955);
      transform-style:preserve-3d;
    }
    .unfold {
      animation: unfold 0.6s cubic-bezier(0.455,0.03,0.515,0.955);
      transform-style:preserve-3d;
    }
    @keyframes fold { 0% { transform: rotateX(0deg); } 100% { transform: rotateX(-180deg); } }
    @keyframes unfold { 0% { transform: rotateX(180deg); } 100% { transform: rotateX(0deg); } }

    .unitLabel { font-size:0.7rem; color:#6a6a6a; letter-spacing:0.15em; text-transform:uppercase; }

    /* Active/opened transforms */
    .cardContainer.active { height:500px; }
    .cardContainer.active .first { transform: rotate3d(1,0,0,-180deg); transition-delay:0s; }
    .cardContainer.active .second { transform: rotate3d(1,0,0,-180deg); transition-delay:0.2s; }
    .cardContainer.active .third { transform: rotate3d(1,0,0,-180deg); transition-delay:0.4s; }

    .cardContainer .first { transform: rotate3d(1,0,0,0deg); transition-delay:0.5s; }
    .cardContainer .second { transform: rotate3d(1,0,0,0deg); transition-delay:0.3s; }
    .cardContainer .third { transform: rotate3d(1,0,0,0deg); transition-delay:0.1s; }

    /* Responsive tweaks */
    @media (max-width: 768px) {
      .cardContainer { width: 340px; }
      .flipUnitContainer { width:50px; height:60px; }
      .upperCard span, .lowerCard span, .flipCard span { font-size:2em; }
    }
    @media (max-width:480px) {
      .cardContainer { width:300px; }
      .flipUnitContainer { width:45px; height:55px; }
      .upperCard span, .lowerCard span, .flipCard span { font-size:1.8em; }
    }
  </style>
</head>
<body>
  <div class="cardContainer" id="card">
    <div class="firstDisplay">
      <div class="wedding-header">
        <div class="date-image-container">
          <img src="image-removebg-preview.png" alt="23 janeiro" class="date-image" onerror="this.style.display='none'">
        </div>
        <h2 class="wedding-location">JACOBINA, BAHIA</h2>
        <div class="tap-hint" id="tapHint">↓ Clique para ver a contagem</div>
      </div>
    </div>

    <div class="first">
      <div class="firstTop"></div>
      <div class="firstBehind">
        <div class="firstBehindDisplay">
          <h3 class="countdown-title">CONTAGEM REGRESSIVA</h3>
        </div>

        <div class="second">
          <div class="secondTop"></div>
          <div class="secondBehind">
            <div class="secondBehindDisplay">
              <div class="countdown-subtitle">Faltam apenas...</div>
            </div>

            <div class="third">
              <div class="thirdTop"></div>
              <div class="thirdBehind">
                <div class="flipClock" id="flipClock">
                  <div class="flipUnit">
                    <div class="flipUnitContainer" data-unit="days">
                      <div class="upperCard"><span>00</span></div>
                      <div class="lowerCard"><span>00</span></div>
                      <div class="flipCard fold"><span>00</span></div>
                      <div class="flipCard unfold"><span>00</span></div>
                    </div>
                    <span class="unitLabel">Dias</span>
                  </div>

                  <div class="flipUnit">
                    <div class="flipUnitContainer" data-unit="hours">
                      <div class="upperCard"><span>00</span></div>
                      <div class="lowerCard"><span>00</span></div>
                      <div class="flipCard fold"><span>00</span></div>
                      <div class="flipCard unfold"><span>00</span></div>
                    </div>
                    <span class="unitLabel">Horas</span>
                  </div>

                  <div class="flipUnit">
                    <div class="flipUnitContainer" data-unit="minutes">
                      <div class="upperCard"><span>00</span></div>
                      <div class="lowerCard"><span>00</span></div>
                      <div class="flipCard fold"><span>00</span></div>
                      <div class="flipCard unfold"><span>00</span></div>
                    </div>
                    <span class="unitLabel">Minutos</span>
                  </div>

                  <div class="flipUnit">
                    <div class="flipUnitContainer" data-unit="seconds">
                      <div class="upperCard"><span>00</span></div>
                      <div class="lowerCard"><span>00</span></div>
                      <div class="flipCard fold"><span>00</span></div>
                      <div class="flipCard unfold"><span>00</span></div>
                    </div>
                    <span class="unitLabel">Segundos</span>
                  </div>

                </div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>

  </div>

  <script>
    // Configurações
    const weddingDate = new Date('2026-01-23T00:00:00');

    function pad2(n) { return (n < 10) ? '0' + n : '' + n; }

    function calcTime() {
      const now = new Date();
      const diff = weddingDate - now;
      if (diff <= 0) return {days:0,hours:0,minutes:0,seconds:0};
      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff / (1000*60*60)) % 24);
      const minutes = Math.floor((diff / 1000 / 60) % 60);
      const seconds = Math.floor((diff / 1000) % 60);
      return {days, hours, minutes, seconds};
    }

    function setDigit(container, value) {
      const upper = container.querySelector('.upperCard span');
      const lower = container.querySelector('.lowerCard span');
      const foldCard = container.querySelector('.flipCard.fold span');
      const unfoldCard = container.querySelector('.flipCard.unfold span');
    
      const text = pad2(value);
      upper.textContent = text;
      lower.textContent = text;
      foldCard.textContent = text;
      unfoldCard.textContent = text;
    }

    function flipDigit(container, newValue, oldValue) {
      const upper = container.querySelector('.upperCard span');
      const lower = container.querySelector('.lowerCard span');
      const foldCard = container.querySelector('.flipCard.fold');
      const unfoldCard = container.querySelector('.flipCard.unfold');
      const foldSpan = foldCard.querySelector('span');
      const unfoldSpan = unfoldCard.querySelector('span');
    
      const newText = pad2(newValue);
      const oldText = pad2(oldValue);
    
      // Mantém os estáticos no valor antigo
      upper.textContent = oldText;
      lower.textContent = oldText;
    
      // Configura cards de animação
      foldSpan.textContent = oldText;
      unfoldSpan.textContent = newText;
    
      // Adiciona classe animating para z-index maior
      foldCard.classList.add('animating');
      unfoldCard.classList.add('animating');
    
      // Força o reflow e reinicia animação
      foldCard.style.animation = 'none';
      unfoldCard.style.animation = 'none';
      void foldCard.offsetWidth;
    
      // Inicia animação
      foldCard.style.animation = 'fold 0.6s cubic-bezier(0.455,0.03,0.515,0.955)';
      unfoldCard.style.animation = 'unfold 0.6s cubic-bezier(0.455,0.03,0.515,0.955)';
    
      // Atualiza os cards estáticos após a animação
      setTimeout(() => {
        upper.textContent = newText;
        lower.textContent = newText;
        foldCard.classList.remove('animating');
        unfoldCard.classList.remove('animating');
      }, 600);
    }

    // Estado anterior - armazena valores E timestamps
    let lastTime = calcTime();
    const animating = { days: false, hours: false, minutes: false, seconds: false };

    function updateAll() {
      const t = calcTime();
    
      const units = ['days', 'hours', 'minutes', 'seconds'];
      units.forEach(unit => {
        // Só anima se: valor mudou E não está animando
        if (t[unit] !== lastTime[unit] && !animating[unit]) {
          const container = document.querySelector('.flipUnitContainer[data-unit="'+unit+'"]');
          if (container) {
            const oldValue = lastTime[unit];
            animating[unit] = true;
            lastTime[unit] = t[unit]; // Atualiza imediatamente
            flipDigit(container, t[unit], oldValue);
            setTimeout(() => {
              animating[unit] = false;
            }, 100); // Libera rápido, mas lastTime já foi atualizado
          }
        }
      });
    }

    // Inicializa
    function initDisplay() {
      const t = calcTime();
      ['days','hours','minutes','seconds'].forEach(u => {
        const container = document.querySelector('.flipUnitContainer[data-unit="'+u+'"]');
        if (container) setDigit(container, t[u]);
      });
      lastTime = t;
    }

    // Inicia
    initDisplay();
    setInterval(updateAll, 50);

    // Toggle active class to open/close card
    const card = document.getElementById('card');
    const tapHint = document.getElementById('tapHint');
    card.addEventListener('click', () => {
      card.classList.toggle('active');
      const opened = card.classList.contains('active');
      tapHint.textContent = opened ? '↑ Clique para fechar' : '↓ Clique para ver a contagem';
    });
  </script>
</body>
</html>