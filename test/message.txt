<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contagem Regressiva - Folding Effect</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cormorant Garamond', Georgia, serif; }
    body { perspective: 700px; background: linear-gradient(135deg,#f5e6d3 0%,#e8d4b8 100%); min-height: 100vh; display:flex; align-items:center; justify-content:center; padding:20px; }

    .cardContainer {
      width: 400px;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 20px 60px rgba(0,0,0,0.15);
      position: relative;
      overflow: visible;
      transition: height 0.9s;
      height: 240px;
    }

    .firstDisplay {
      width:100%;
      height:240px;
      position:absolute;
      background:#ffffff;
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px 30px;
      z-index:10;
      box-shadow: 0px 0px 25px -1px rgba(0,0,0,0.17);
    }

    .wedding-header { text-align:center; width:100%; }
    .date-image-container { display:flex; justify-content:center; margin-bottom:20px; width:100% }
    .date-image { max-width:300px; width:100%; height:auto }

    .wedding-location { font-size:1rem; font-weight:400; color:#6a6a6a; letter-spacing:0.25em; margin:15px 0; }
    .tap-hint { font-size:0.85rem; color:#999; margin-top:25px; font-style:italic; animation:pulse 2s infinite; }
    @keyframes pulse { 0%,100%{opacity:0.5} 50%{opacity:1} }

    /* Folding panels */
    .first, .second, .third {
      position:absolute;
      width:100%;
      left:0;
      transform-origin:bottom;
      transform-style:preserve-3d;
      transition: transform 0.6s;
      border-radius:12px;
      pointer-events:none;
    }

    .first { height:240px; top:0; }
    .second { height:80px; bottom: -2px; top:auto; }
    .third { height:160px; bottom: -2px; top:auto; }

    .firstTop, .firstBehind, .secondTop, .secondBehind, .thirdTop, .thirdBehind {
      position:absolute; left:0; width:100%;
      backface-visibility:hidden; border-radius:12px;
    }
    .firstTop { height:240px; background:#f8f8f8; border:1px dashed #d1d1d1; border-left:none; border-right:none; }
    .firstBehind { height:240px; background:#fff; transform: rotateX(-180deg); padding:30px; display:flex; align-items:center; justify-content:center; box-shadow: 0px 11px 25px -1px rgba(0,0,0,0.17); border:1px dashed #d1d1d1; border-left:none; border-right:none; }

    .secondTop { height:80px; background:#f0f0f0; border:1px dashed #d1d1d1; border-left:none; border-right:none; }
    .secondBehind { height:80px; background:#fff; transform: rotateX(-180deg); display:flex; align-items:center; justify-content:center; padding:20px; box-shadow: 0px 11px 25px -1px rgba(0,0,0,0.17); border:1px dashed #d1d1d1; border-left:none; border-right:none; }

    .thirdTop { height:160px; background:#e8e8e8; border:1px dashed #d1d1d1; border-left:none; border-right:none; }
    .thirdBehind { height:160px; background:#fff; transform: rotateX(-180deg); padding:20px; display:flex; align-items:center; justify-content:center; box-shadow: 0px 11px 25px -1px rgba(0,0,0,0.17); border-radius: 0 0 12px 12px; }

    .countdown-title { font-size:1.5rem; color:#2c2c2c; letter-spacing:0.3em; text-align:center; }
    .countdown-subtitle { font-size:1.1rem; color:#6a6a6a; letter-spacing:0.15em; }

    /* Flip clock */
    .flipClock { display:flex; justify-content:center; gap:15px; flex-wrap:wrap; }
    .flipUnit { display:flex; flex-direction:column; align-items:center; gap:8px; }

    .flipUnitContainer {
      position:relative; width:60px; height:70px; perspective:300px;
    }

    .upperCard, .lowerCard {
      display:flex; justify-content:center; position:relative; width:100%; height:50%; overflow:hidden; border:1px solid #e8d4b8; background:#fdfbf7;
    }
    .upperCard { align-items:flex-end; border-bottom:0.5px solid #e8d4b8; border-top-left-radius:4px; border-top-right-radius:4px; }
    .lowerCard { align-items:flex-start; border-top:0.5px solid #e8d4b8; border-bottom-left-radius:4px; border-bottom-right-radius:4px; }

    .upperCard span, .lowerCard span, .flipCard span { font-size:2.5em; font-weight:300; color:#2c2c2c; transform: translateY(0%); display:inline-block; }

    /* IMPORTANT: Flip cards are hidden by default to avoid duplicate visible numbers */
    .flipCard {
      position:absolute; left:0; width:100%; height:50%; overflow:hidden; backface-visibility:hidden; display:flex; justify-content:center; align-items:center;
      background:#fdfbf7; border:0.5px solid #e8d4b8;
      visibility: hidden; /* hidden unless animating */
    }

    .flipCard.visible { visibility: visible; }

    .flipCard.top { top:0; transform-origin:50% 100%; z-index:3; }
    .flipCard.bottom { top:50%; transform-origin:50% 0%; z-index:2; }

    /* Animation classes */
    .fold {
      animation: fold 0.6s cubic-bezier(0.455,0.03,0.515,0.955) forwards;
      transform-style:preserve-3d;
    }
    .unfold {
      animation: unfold 0.6s cubic-bezier(0.455,0.03,0.515,0.955) forwards;
      transform-style:preserve-3d;
    }
    @keyframes fold { 0% { transform: rotateX(0deg); } 100% { transform: rotateX(-180deg); } }
    @keyframes unfold { 0% { transform: rotateX(180deg); } 100% { transform: rotateX(0deg); } }

    .unitLabel { font-size:0.7rem; color:#6a6a6a; letter-spacing:0.15em; text-transform:uppercase; }

    /* Active/opened transforms */
    .cardContainer.active { height:500px; }
    .cardContainer.active .first { transform: rotate3d(1,0,0,-180deg); transition-delay:0s; }
    .cardContainer.active .second { transform: rotate3d(1,0,0,-180deg); transition-delay:0.2s; }
    .cardContainer.active .third { transform: rotate3d(1,0,0,-180deg); transition-delay:0.4s; }

    .cardContainer .first { transform: rotate3d(1,0,0,0deg); transition-delay:0.5s; }
    .cardContainer .second { transform: rotate3d(1,0,0,0deg); transition-delay:0.3s; }
    .cardContainer .third { transform: rotate3d(1,0,0,0deg); transition-delay:0.1s; }

    /* Responsive tweaks */
    @media (max-width: 768px) {
      .cardContainer { width: 340px; }
      .flipUnitContainer { width:50px; height:60px; }
      .upperCard span, .lowerCard span, .flipCard span { font-size:2em; }
    }
    @media (max-width:480px) {
      .cardContainer { width:300px; }
      .flipUnitContainer { width:45px; height:55px; }
      .upperCard span, .lowerCard span, .flipCard span { font-size:1.8em; }
    }
  </style>
</head>
<body>
  <div class="cardContainer" id="card">
    <div class="firstDisplay">
      <div class="wedding-header">
        <div class="date-image-container">
          <!-- coloque sua imagem com este nome na mesma pasta ou ajuste o src -->
          <img src="image-removebg-preview.png" alt="23 janeiro" class="date-image" onerror="this.style.display='none'">
        </div>
        <h2 class="wedding-location">JACOBINA, BAHIA</h2>
        <div class="tap-hint" id="tapHint">↓ Clique para ver a contagem</div>
      </div>
    </div>

    <div class="first">
      <div class="firstTop"></div>
      <div class="firstBehind">
        <div class="firstBehindDisplay">
          <h3 class="countdown-title">CONTAGEM REGRESSIVA</h3>
        </div>

        <div class="second">
          <div class="secondTop"></div>
          <div class="secondBehind">
            <div class="secondBehindDisplay">
              <div class="countdown-subtitle">Faltam apenas...</div>
            </div>

            <div class="third">
              <div class="thirdTop"></div>
              <div class="thirdBehind">
                <div class="flipClock" id="flipClock">
                  <!-- unidades: cada uma terá estrutura igual -->
                  <div class="flipUnit">
                    <div class="flipUnitContainer" data-unit="days">
                      <div class="upperCard"><span>00</span></div>
                      <div class="lowerCard"><span>00</span></div>
                      <div class="flipCard top"><span>00</span></div>
                      <div class="flipCard bottom"><span>00</span></div>
                    </div>
                    <span class="unitLabel">Dias</span>
                  </div>

                  <div class="flipUnit">
                    <div class="flipUnitContainer" data-unit="hours">
                      <div class="upperCard"><span>00</span></div>
                      <div class="lowerCard"><span>00</span></div>
                      <div class="flipCard top"><span>00</span></div>
                      <div class="flipCard bottom"><span>00</span></div>
                    </div>
                    <span class="unitLabel">Horas</span>
                  </div>

                  <div class="flipUnit">
                    <div class="flipUnitContainer" data-unit="minutes">
                      <div class="upperCard"><span>00</span></div>
                      <div class="lowerCard"><span>00</span></div>
                      <div class="flipCard top"><span>00</span></div>
                      <div class="flipCard bottom"><span>00</span></div>
                    </div>
                    <span class="unitLabel">Minutos</span>
                  </div>

                  <div class="flipUnit">
                    <div class="flipUnitContainer" data-unit="seconds">
                      <div class="upperCard"><span>00</span></div>
                      <div class="lowerCard"><span>00</span></div>
                      <div class="flipCard top"><span>00</span></div>
                      <div class="flipCard bottom"><span>00</span></div>
                    </div>
                    <span class="unitLabel">Segundos</span>
                  </div>

                </div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>

  </div>

  <script>
    // Configurações
    const weddingDate = new Date('2026-01-23T00:00:00');
    const refreshMs = 250; // intervalo confortável para updates (não é preciso 50ms)

    // Keep last values to detect change
    const state = { days: null, hours: null, minutes: null, seconds: null };

    function pad2(n) { return (n < 10) ? '0' + n : '' + n; }

    function calcTime() {
      const now = new Date();
      const diff = weddingDate - now;
      if (diff <= 0) return {days:0,hours:0,minutes:0,seconds:0};
      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff / (1000*60*60)) % 24);
      const minutes = Math.floor((diff / 1000 / 60) % 60);
      const seconds = Math.floor((diff / 1000) % 60);
      return {days, hours, minutes, seconds};
    }

    // Update a single flip unit
    function flipUnit(unitName, newValue) {
      const container = document.querySelector('.flipUnitContainer[data-unit="'+unitName+'"]');
      if (!container) return;
      const upper = container.querySelector('.upperCard span');
      const lower = container.querySelector('.lowerCard span');
      const topFlip = container.querySelector('.flipCard.top');
      const bottomFlip = container.querySelector('.flipCard.bottom');

      const current = parseInt(upper.textContent, 10) || 0;
      if (current === newValue) return; // nada a fazer

      const currentText = pad2(current);
      const newText = pad2(newValue);

      // preparar textos
      // topFlip mostra o valor atual que vai "fold"
      topFlip.querySelector('span').textContent = currentText;
      // bottomFlip mostra o novo valor que vai "unfold"
      bottomFlip.querySelector('span').textContent = newText;

      // tornar visíveis os elementos de flip (para evitar duplicação, eles ficam hidden por padrão)
      topFlip.classList.add('visible');
      bottomFlip.classList.add('visible');

      // iniciar animações
      // garantir reflow antes de adicionar classes (forçar leitura)
      void topFlip.offsetWidth;
      topFlip.classList.add('fold');
      bottomFlip.classList.add('unfold');

      // quando top fold termina, atualiza upper estático e remove classes
      function onTopEnd() {
        topFlip.classList.remove('fold');
        topFlip.classList.remove('visible');
        upper.textContent = newText;
        topFlip.removeEventListener('animationend', onTopEnd);
      }
      // quando bottom unfold termina, atualiza lower estático e remove classes
      function onBottomEnd() {
        bottomFlip.classList.remove('unfold');
        bottomFlip.classList.remove('visible');
        lower.textContent = newText;
        bottomFlip.removeEventListener('animationend', onBottomEnd);
      }

      topFlip.addEventListener('animationend', onTopEnd);
      bottomFlip.addEventListener('animationend', onBottomEnd);
    }

    function updateAll() {
      const t = calcTime();
      if (state.days !== t.days) flipUnit('days', t.days);
      if (state.hours !== t.hours) flipUnit('hours', t.hours);
      if (state.minutes !== t.minutes) flipUnit('minutes', t.minutes);
      if (state.seconds !== t.seconds) flipUnit('seconds', t.seconds);

      state.days = t.days;
      state.hours = t.hours;
      state.minutes = t.minutes;
      state.seconds = t.seconds;
    }

    // Inicializa valores sem animação
    function initDisplay() {
      const t = calcTime();
      ['days','hours','minutes','seconds'].forEach(u => {
        const container = document.querySelector('.flipUnitContainer[data-unit="'+u+'"]');
        if (!container) return;
        const upper = container.querySelector('.upperCard span');
        const lower = container.querySelector('.lowerCard span');
        const topFlip = container.querySelector('.flipCard.top');
        const bottomFlip = container.querySelector('.flipCard.bottom');

        const v = t[u];
        const txt = (v == null) ? '00' : (v < 10 ? '0'+v : ''+v);

        upper.textContent = txt;
        lower.textContent = txt;

        // manter os flipCards sincronizados porém ocultos (classe .visible controla visibilidade)
        topFlip.querySelector('span').textContent = txt;
        bottomFlip.querySelector('span').textContent = txt;
        topFlip.classList.remove('visible','fold');
        bottomFlip.classList.remove('visible','unfold');
      });
      state.days = t.days; state.hours = t.hours; state.minutes = t.minutes; state.seconds = t.seconds;
    }

    // Start loop
    initDisplay();
    setInterval(updateAll, refreshMs);

    // Toggle active class to open/close card
    const card = document.getElementById('card');
    const tapHint = document.getElementById('tapHint');
    card.addEventListener('click', () => {
      card.classList.toggle('active');
      const opened = card.classList.contains('active');
      tapHint.textContent = opened ? '↑ Clique para fechar' : '↓ Clique para ver a contagem';
    });

    // For initial tapHint state
    tapHint.textContent = '↓ Clique para ver a contagem';
  </script>
</body>
</html>